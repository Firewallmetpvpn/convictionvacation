(window.webpackJsonpconvictionvacation=window.webpackJsonpconvictionvacation||[]).push([[0],{173:function(e,a,t){e.exports=t(301)},178:function(e,a,t){},300:function(e,a,t){},301:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),c=t(40),i=t.n(c),o=(t(178),t(160)),s=t(106),r=t(24),u=t(22),d=t.n(u),m=t(317),h=t(314),v=t(313),f=t(302),E=t(310),b=t(316),p=t(311),C=t(312),D=t(31),w="FELONY_CLASS_B",R="FELONY_CLASS_C",y="MISDEMEANOR",g="MARIJUANA_MISDEMEANOR",k="GROSS_MISDEMEANOR",O=[{key:w,value:w,text:"Felony B"},{key:R,value:R,text:"Felony C"},{key:y,value:y,text:"Misdemeanor"},{key:g,value:g,text:"Marijuana Misdemeanor"},{key:k,value:k,text:"Gross Misdemeanor"},{key:"UNCLASSIFIED",value:"unclear",text:"Unclear"}],x=function(e){var a=e.index,t=e.conviction,n=e.handleChange,c=e.handleDelete,i=l.a.useState(window.matchMedia("(max-width:767px)").matches),o=Object(r.a)(i,2),s=o[0],u=o[1],d=function(e,t){var l=t.value;n(a,e.currentTarget.name,l)},m=s?"Domestic Violence":"",h=s?"DUI Related":"",v=s?"Last Relevant Date (Leave blank if none)":"";return l.a.useEffect((function(){var e=function(){u(window.matchMedia("(max-width:767px)").matches)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),l.a.createElement(b.a.Row,null,l.a.createElement(b.a.Cell,null,l.a.createElement(E.a,{fluid:!0,placeholder:"Case No.",name:"id",value:t.id,onChange:d})),l.a.createElement(b.a.Cell,null,l.a.createElement(E.a,{fluid:!0,placeholder:"Conviction name",name:"name",value:t.name,onChange:d})),l.a.createElement(b.a.Cell,null,l.a.createElement(p.a,{fluid:!0,placeholder:"Conviction classification",value:t.classification,onChange:function(e,t){var l=t.value;n(a,"classification",l)},options:O})),l.a.createElement(b.a.Cell,null,l.a.createElement("label",null,v,l.a.createElement(E.a,{fluid:!0,type:"date",name:"date",value:t.date,onChange:d}))),l.a.createElement(b.a.Cell,null,l.a.createElement(C.a,{label:m,checked:t.isDomesticViolence,onChange:function(e,t){var l=t.checked;n(a,"isDomesticViolence",l)}})),l.a.createElement(b.a.Cell,null,l.a.createElement(C.a,{label:h,checked:t.isDuiRelated,onChange:function(e,t){var l=t.checked;n(a,"isDuiRelated",l)}})),l.a.createElement(b.a.Cell,null,l.a.createElement(f.a,{fluid:!0,icon:!0,onClick:function(){c(a)}},l.a.createElement(D.a,{name:"close"}))))},N=[{text:"Case No.",width:"3"},{text:"Eligible Convictions",width:"4"},{text:"Classifications",width:"4"},{text:"Last Relevant Date",subtext:"(Leave blank if none)",width:"3"},{text:"Domestic Violence",width:"1"},{text:"DUI Related",width:"1"},{text:null,width:"1"}],S=function(e){var a=e.addConvictions,t=e.convictions,n=e.handleChange,c=e.handleDelete,i=e.clientName,o=e.setClientName,s=e.clientDOB,u=e.setClientDOB,d=l.a.useState(1),h=Object(r.a)(d,2),v=h[0],p=h[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{label:"Client Name: ",placeholder:"Client Name",size:"large",value:i,onChange:function(e,a){var t=a.value;o(t)}}),l.a.createElement(E.a,{label:"Client Date of Birth: ",type:"date",name:"date",size:"large",value:s,onChange:function(e,a){var t=a.value;u(t)}}),l.a.createElement(b.a,{striped:!0,stackable:!0},l.a.createElement(b.a.Header,null,l.a.createElement(b.a.Row,null,N.map((function(e){return l.a.createElement(b.a.HeaderCell,{key:e.text,width:e.width},l.a.createElement("div",null,e.text),e.subtext&&l.a.createElement("div",null,e.subtext))})))),l.a.createElement(b.a.Body,null,t.map((function(e,a){return l.a.createElement(x,{key:a,index:a,conviction:e,handleChange:n,handleDelete:c})})))),l.a.createElement(m.a,{padded:!0,stackable:!0,columns:1},l.a.createElement(m.a.Row,null,l.a.createElement(m.a.Column,{width:4},l.a.createElement(E.a,{fluid:!0,min:"1",max:"100",type:"number",placeholder:"Number of convictions",value:v,onChange:function(e,a){var t=a.value;p(t)},label:l.a.createElement(f.a,{secondary:!0,onClick:function(){a(parseInt(v))}},"Add More Convictions"),labelPosition:"right"})))))},M=t(315),V=[{text:"Case No.",width:"3"},{text:"Eligible Convictions",width:"3"},{text:"Eligibility",width:"3"},{text:"Reasons",width:"7"}],Y=function(e){var a=e.calculatorInput,t=e.calculatorOutput,n=e.clientName,c=(e.clientDOB,e.handleBack),i=e.handleReset,o=t.convictions.map((function(e,t){var n=e.id,l=e.vacatable,c=e.reasons,i=l?c.vacatableReasons:null===l?c.errors:c.notVacatableReasons;return{id:n,crime:a.convictions[t].crime,vacatable:l,reasons:i}}));return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Report for ".concat(n)),l.a.createElement(b.a,{striped:!0,stackable:!0},l.a.createElement(b.a.Header,null,l.a.createElement(b.a.Row,null,V.map((function(e){return l.a.createElement(b.a.HeaderCell,{key:e.text,width:e.width},e.text)})))),l.a.createElement(b.a.Body,null,o.map((function(e){var a=e.id,t=e.crime,n=e.vacatable,c=e.reasons;return l.a.createElement(b.a.Row,{key:a},l.a.createElement(b.a.Cell,null,l.a.createElement("b",{className:"results-table-header"},"".concat(V[0].text,": ")),a),l.a.createElement(b.a.Cell,null,l.a.createElement("b",{className:"results-table-header"},"".concat(V[1].text.slice(0,-1),": ")),t),l.a.createElement(b.a.Cell,null,l.a.createElement("b",{className:"results-table-header"},"".concat(V[2].text,": ")),l.a.createElement("b",{style:{color:n?"green":"red"}},n?"Yes":"No")),l.a.createElement(b.a.Cell,null,l.a.createElement("b",{className:"results-table-header"},"".concat(V[3].text,": ")),l.a.createElement(M.a,{bulleted:!0},c.map((function(e){return l.a.createElement(M.a.Item,{key:e},e)})))))})))),l.a.createElement(m.a,{padded:!0,stackable:!0,columns:2},l.a.createElement(m.a.Row,null,l.a.createElement(m.a.Column,{width:2},l.a.createElement(f.a,{fluid:!0,secondary:!0,onClick:c},"Back")),l.a.createElement(m.a.Column,{width:2},l.a.createElement(f.a,{fluid:!0,primary:!0,onClick:i},"Reset")))))},j=t(21),B=t(34),I=function(){function e(a,t){Object(j.a)(this,e),this.targetDate=a,this.convictions=t}return Object(B.a)(e,[{key:"getConviction",value:function(e){var a=null;return this.convictions.forEach((function(t){t.id===e&&(a=t)})),a}}]),e}(),A=function e(a,t,n){Object(j.a)(this,e),this.id=a,this.vacatable=t,this.reasons=n},L=function e(a,t,n){Object(j.a)(this,e),this.vacatableReasons=a,this.notVacatableReasons=t,this.errors=n},F=function(){function e(){Object(j.a)(this,e)}return Object(B.a)(e,[{key:"calculate",value:function(e){var a=this.createSkeletonCalculatorOutput(e),t=d()(e.calculationDate),n=d()(e.clientDOB),l=this.calculateLastConvictionDate(e),c=l.format("YYYY-MM-DD"),i=t.diff(l,"years");return e.convictions.forEach((function(e){var t=a.getConviction(e.id);switch(e.classification){case y:case k:i>=3?t.reasons.vacatableReasons.push("No new conviction within the last 3 years."):t.reasons.notVacatableReasons.push("The latest conviction date ".concat(c," is within the last 3 years."));break;case g:d()(e.relevantDate).diff(n,"years")>=21?t.reasons.vacatableReasons.push("Was at least 21 years old at time of offense."):t.reasons.notVacatableReasons.push("Was less than 21 years old at time of offense.");break;case w:i>=10?t.reasons.vacatableReasons.push("No new conviction within the last 10 years."):t.reasons.notVacatableReasons.push("The latest conviction date ".concat(c," is within the last 10 years."));break;case R:i>=5?t.reasons.vacatableReasons.push("No new conviction within the last 5 years."):t.reasons.notVacatableReasons.push("The latest conviction date ".concat(c," is within the last 5 years."));break;default:t.reasons.errors.push("Crime Classification not specified.")}})),e.convictions.forEach((function(e){var n=a.getConviction(e.id),l=d()(e.relevantDate),c=l.format("YYYY-MM-DD"),i=t.diff(l,"years");e.classification!==y&&e.classification!==k||(!0===e.isDuiRelated?i>=10?n.reasons.vacatableReasons.push("Conviction involves DUI, 10 year has passed since the Relevant Date"):n.reasons.notVacatableReasons.push("Conviction involves DUI, 10 years has not passed since the Relevant Date ".concat(c)):!0===e.isDomesticViolenceRelated?i>=5?n.reasons.vacatableReasons.push("Conviction involves Domestic Violence, 5 year has passed since the Relevant Date (completion of sentence and any treatment ordered)"):n.reasons.notVacatableReasons.push("Conviction involves Domestic Violence, 5 year has not passed since the Relevant Date  ".concat(c)):i>=3?n.reasons.vacatableReasons.push("3 year has passed since the Relevant Date"):n.reasons.notVacatableReasons.push("3 years has not passed since the Relevant Date ".concat(c)))})),e.convictions.forEach((function(e){var n=a.getConviction(e.id),l=d()(e.relevantDate),c=l.format("YYYY-MM-DD"),i=t.diff(l,"years");e.classification!==R&&e.classification!==w||(l>=d()("1984-07-01")?n.reasons.vacatableReasons.push("Offense's Relevant Date (committed) is after July 1st, 1984."):n.reasons.notVacatableReasons.push("Offense Relevant Date ".concat(c," is before July 1st, 1984."))),e.classification===w&&(i>=10?n.reasons.vacatableReasons.push("10 years has passed since the Relevant Date (latter of release or sentencing date)"):n.reasons.notVacatableReasons.push("10 years has not passed since the Relevant Date ".concat(c))),e.classification===R&&(i>=5?n.reasons.vacatableReasons.push("5 years has passed since the Relevant Date (latter of release or sentencing date"):n.reasons.notVacatableReasons.push("5 years has not passed since the Relevant Date ".concat(c)))})),this.setEligibilityProperty(a),a}},{key:"createSkeletonCalculatorOutput",value:function(e){var a=e.convictions.map((function(e){return new A(e.id,null,new L([],[],[]))}));return new I(e.calculationDate,a)}},{key:"calculateLastConvictionDate",value:function(e){var a=e.convictions.filter((function(e){return e.classification!==g})).map((function(e){return e.relevantDate})).filter((function(e){return void 0!==e})).sort().pop();return d()(a)}},{key:"setEligibilityProperty",value:function(e){e.convictions.forEach((function(e){e.reasons.errors.length>0?e.vacatable=null:e.reasons.notVacatableReasons.length>0?e.vacatable=!1:e.reasons.vacatableReasons.length>0?e.vacatable=!0:console.error("Conviction output does not have any errors, vacatable reasons and not vacatable reasons.")}))}}]),e}(),U=function e(a,t,n){Object(j.a)(this,e),this.calculationDate=a,this.clientDOB=t,this.convictions=n},_=function e(a,t,n,l,c,i){Object(j.a)(this,e),this.id=a,this.crime=t,this.classification=n,this.isDomesticViolenceRelated=l,this.isDuiRelated=c,this.relevantDate=i},z=function(){var e=new F,a=l.a.useState(!1),t=Object(r.a)(a,2),n=t[0],c=t[1],i=l.a.useRef(),o=l.a.useRef(),u=l.a.useState([]),E=Object(r.a)(u,2),b=E[0],p=E[1],C=l.a.useState(""),D=Object(r.a)(C,2),w=D[0],R=D[1],y=l.a.useState(""),g=Object(r.a)(y,2),k=g[0],O=g[1],x=l.a.useState(""),N=Object(r.a)(x,2),M=N[0],V=N[1],j=function(e){var a=Array.apply(null,Array(e)).map((function(){return{id:"",name:"",classification:"",isDomesticViolence:!1,date:""}}));p((function(e){return e.concat(a)}))};l.a.useEffect((function(){j(5)}),[]);return l.a.createElement(l.a.Fragment,null,n?l.a.createElement(Y,{calculatorInput:i.current,calculatorOutput:o.current,clientName:w,clientDOB:k,handleBack:function(){o.current=null,c(!1)},handleReset:function(){i.current=null,o.current=null,p([]),j(5),R(""),V(""),c(!1)}}):l.a.createElement(S,{addConvictions:j,convictions:b,handleChange:function(e,a,t){p((function(n){var l=Object(s.a)(n);return l[e][a]=t,l}))},handleDelete:function(e){p((function(a){var t=Object(s.a)(a);return t.splice(e,1),t}))},clientName:w,setClientName:R,clientDOB:k,setClientDOB:O}),l.a.createElement(m.a,{padded:!0,stackable:!0,columns:2},l.a.createElement(m.a.Row,null,l.a.createElement(m.a.Column,{width:13},l.a.createElement(h.a,null,l.a.createElement(h.a.Field,null,l.a.createElement("b",null,"Notes:")),l.a.createElement(v.a,{onChange:function(e,a){var t=a.value;V(t)},placeholder:"Notes and comments...",rows:10,value:M}))),l.a.createElement(m.a.Column,{verticalAlign:"middle",width:2},n&&l.a.createElement(f.a,{fluid:!0,primary:!0,onClick:function(){window.print()}},"Print"),!n&&l.a.createElement(f.a,{fluid:!0,primary:!0,onClick:function(){var a=b.filter((function(e){return e.id&&e.name&&e.classification&&e.date})).map((function(e){return new _(e.id,e.name,"unclear"===e.classification?null:e.classification,e.isDomesticViolence,e.isDuiRelated,d()(e.date,"YYYY-MM-DD").toISOString())})),t=d()().toISOString(),n=d()(k,"YYYY-MM-DD").toISOString(),l=new U(t,n,a);i.current=l;var s=e.calculate(l);o.current=s,c(!0)}},"Submit")))),l.a.createElement("div",{id:"notes-print-area"},l.a.createElement("h5",null,"Notes:"),M))};t(300);var J=function(){return l.a.useEffect((function(){o.a.initialize("UA-156075348-1")})),l.a.createElement("div",null,l.a.createElement("header",{className:"App-header"},l.a.createElement("p",null,"King County Conviction Vacation")),l.a.createElement(z,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[173,1,2]]]);
//# sourceMappingURL=main.03f6be96.chunk.js.map