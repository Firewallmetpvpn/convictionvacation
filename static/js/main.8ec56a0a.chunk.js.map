{"version":3,"sources":["logic/type/CrimesClassifications.js","components/Conviction.jsx","components/ConvictionForm.jsx","components/ConvictionResults.jsx","logic/type/CalculatorOutput.js","logic/EligibilityTimelineCalculator.js","logic/type/CalculatorInput.js","components/ConvictionCalculator.jsx","App.js","serviceWorker.js","index.js"],"names":["convictionClassificationOptions","key","CrimeClassification","value","text","Conviction","index","conviction","handleChange","handleDelete","React","useState","window","matchMedia","matches","showLabel","setShowLabel","onChange","e","currentTarget","name","checkboxLabel","checkboxDuiLabel","dateLabel","useEffect","onResize","addEventListener","removeEventListener","ReactGA","initialize","Table","Row","Cell","Input","fluid","placeholder","id","Select","classification","options","type","date","Checkbox","label","checked","isDomesticViolence","isDuiRelated","Button","icon","onClick","Icon","Headers","width","subtext","ConvictionForm","addConvictions","convictions","clientName","setClientName","clientDOB","setClientDOB","convictionNum","setConvictionNum","Fragment","size","striped","stackable","Header","map","headerMetaData","HeaderCell","Body","i","Grid","padded","columns","Column","min","max","secondary","parseInt","labelPosition","ConvictionResults","calculatorInput","calculatorOutput","handleBack","handleReset","vacatable","reasons","messages","vacatableReasons","errors","notVacatableReasons","crime","className","slice","style","color","List","bulleted","reason","Item","primary","CalculatorOutput","targetDate","this","matchingConviction","forEach","ConvictionOutput","ConvictionVacatableReasons","EligibilityTimelineCalculator","input","output","createSkeletonCalculatorOutput","calculationDate","moment","lastConvictionDate","calculateLastConvictionDate","lastConvictionDateString","format","yearsSinceLastConvictionDate","diff","convictionOutput","getConviction","push","relevantDate","relevantDateString","yearsSinceRelevantDate","isDomesticViolenceRelated","setEligibilityProperty","outputConvictionSkeletons","inputConviction","filter","undefined","sort","pop","length","console","error","CalculatorInput","ConvictionInput","ConvictionCalculator","calculator","hasResults","setHasResults","calculatorInputRef","useRef","calculatorOutputRef","setConvictions","notes","setNotes","num","newConvictions","Array","apply","concat","current","newConvs","splice","Form","Field","TextArea","rows","verticalAlign","print","convictionInputs","toISOString","clientDOBString","calculate","App","pageview","location","pathname","search","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.8ec56a0a.chunk.js","sourcesContent":["export default {\n    // Class A Felony is by definition NOT vacatable, and are not presented as options\n    // \"FELONY_CLASS_A\": \"FELONY_CLASS_A\",\n    \"FELONY_CLASS_B\": \"FELONY_CLASS_B\",\n    \"FELONY_CLASS_C\": \"FELONY_CLASS_C\",\n    \"MISDEMEANOR\": \"MISDEMEANOR\",\n    \"MARIJUANA_MISDEMEANOR\": \"MARIJUANA_MISDEMEANOR\",\n    \"GROSS_MISDEMEANOR\": \"GROSS_MISDEMEANOR\"\n};\n","import React from 'react';\nimport { Button, Checkbox, Icon, Input, Select, Table } from 'semantic-ui-react';\n\nimport CrimeClassification from '../logic/type/CrimesClassifications';\n\nimport ReactGA from 'react-ga';\nconst trackingId = \"UA-156075348-1\";\n\nconst convictionClassificationOptions = [\n  {\n    key: CrimeClassification.FELONY_CLASS_B,\n    value: CrimeClassification.FELONY_CLASS_B,\n    text: 'Felony B'\n  },\n  {\n    key: CrimeClassification.FELONY_CLASS_C,\n    value: CrimeClassification.FELONY_CLASS_C,\n    text: 'Felony C'\n  },\n  {\n    key: CrimeClassification.MISDEMEANOR,\n    value: CrimeClassification.MISDEMEANOR,\n    text: 'Misdemeanor'\n  },\n  {\n    key: CrimeClassification.MARIJUANA_MISDEMEANOR,\n    value: CrimeClassification.MARIJUANA_MISDEMEANOR,\n    text: 'Marijuana Misdemeanor'\n  },\n  {\n    key: CrimeClassification.GROSS_MISDEMEANOR,\n    value: CrimeClassification.GROSS_MISDEMEANOR,\n    text: 'Gross Misdemeanor'\n  },\n  {\n    key: 'UNCLASSIFIED',\n    value: 'unclear',\n    text: 'Unclear'\n  }\n];\n\nconst Conviction = ({\n  index,\n  conviction,\n  handleChange,\n  handleDelete\n}) => {\n  const [showLabel, setShowLabel] = React.useState(window.matchMedia('(max-width:767px)').matches);\n\n  const onChange = (e, { value }) => {\n    handleChange(index, e.currentTarget.name, value);\n  };\n\n  const onSelect = (e, { value }) => {\n    handleChange(index, 'classification', value);\n  };\n\n  const onChecked = (e, { checked }) => {\n    handleChange(index, 'isDomesticViolence', checked);\n  };\n\n  const onDuiChecked = (e, { checked }) => {\n    handleChange(index, 'isDuiRelated', checked);\n  };\n\n  const onDelete = () => {\n    handleDelete(index);\n  };\n\n  const checkboxLabel = showLabel  ? 'Domestic Violence' : '';\n  const checkboxDuiLabel = showLabel  ? 'DUI Related' : '';\n\n  const dateLabel = showLabel ? 'Last Relevant Date (Leave blank if none)'  : '';\n  React.useEffect(() => {\n    const onResize = () => {\n      setShowLabel(window.matchMedia('(max-width:767px)').matches);\n    };\n    window.addEventListener('resize', onResize);\n\n    return () => {\n      window.removeEventListener('resize', onResize);\n    };\n  }, []);\n\n  React.useEffect(() => {\n    ReactGA.initialize(trackingId);\n  })\n\n  return (\n    <Table.Row>\n      <Table.Cell>\n        <Input fluid placeholder='Case No.' name='id' value={conviction.id} onChange={onChange} />\n      </Table.Cell>\n      <Table.Cell>\n        <Input fluid placeholder='Conviction name' name='name' value={conviction.name} onChange={onChange} />\n      </Table.Cell>\n      <Table.Cell>\n        <Select\n          fluid\n          placeholder='Conviction classification'\n          value={conviction.classification}\n          onChange={onSelect}\n          options={convictionClassificationOptions} />\n      </Table.Cell>\n      <Table.Cell>\n        <label>\n          {dateLabel}\n          <Input fluid type='date' name='date' value={conviction.date} onChange={onChange} />\n        </label>\n      </Table.Cell>\n      <Table.Cell>\n        <Checkbox label={checkboxLabel} checked={conviction.isDomesticViolence} onChange={onChecked} />\n      </Table.Cell>\n      <Table.Cell>\n        <Checkbox label={checkboxDuiLabel} checked={conviction.isDuiRelated} onChange={onDuiChecked} />\n      </Table.Cell>\n      <Table.Cell>\n        <Button fluid icon onClick={onDelete}>\n          <Icon name='close' />\n        </Button>\n      </Table.Cell>\n    </Table.Row>\n  );\n};\n\nexport default Conviction;\n","import React from 'react';\nimport { Button, Grid, Input, Table } from 'semantic-ui-react';\n\nimport Conviction from './Conviction';\n\nconst Headers = [\n  {\n    text: 'Case No.',\n    width: '3'\n  },\n  {\n    text: 'Eligible Convictions',\n    width: '4'\n  },\n  {\n    text: 'Classifications',\n    width: '4'\n  },\n  {\n    text: 'Last Relevant Date',\n    subtext: '(Leave blank if none)',\n    width: '3'\n  },\n  {\n    text: 'Domestic Violence',\n    width: '1'\n  },\n  {\n    text: 'DUI Related',\n    width: '1'\n  },\n  {\n    text: null,\n    width: '1'\n  }\n];\n\nconst ConvictionForm = ({\n  addConvictions,\n  convictions,\n  handleChange,\n  handleDelete,\n  clientName,\n  setClientName,\n  clientDOB,\n  setClientDOB,\n}) => {\n  const [convictionNum, setConvictionNum] = React.useState(1);\n\n  const onConvictionNumChange = (e, { value }) => {\n    setConvictionNum(value);\n  };\n\n  const onClientNameChange = (e, { value }) => {\n    setClientName(value);\n  };\n\n  const onClientDOBChange = (e, { value }) => {\n    setClientDOB(value);\n  };\n\n  const handleAddConvictions = () => {\n    addConvictions(parseInt(convictionNum));\n  };\n\n  return (\n    <React.Fragment>\n      <Input label='Client Name: ' placeholder='Client Name' size='large' value={clientName} onChange={onClientNameChange} />\n      <Input label = 'Client Date of Birth: ' type='date' name='date' size='large' value={clientDOB} onChange={onClientDOBChange} />\n      <Table striped stackable>\n        <Table.Header>\n          <Table.Row>\n            {Headers.map(headerMetaData =>\n              <Table.HeaderCell key={headerMetaData.text} width={headerMetaData.width}>\n                <div>{headerMetaData.text}</div>\n                {headerMetaData.subtext && <div>{headerMetaData.subtext}</div>}\n              </Table.HeaderCell>\n            )}\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {convictions.map((conviction, i) =>\n            <Conviction\n              key={i}\n              index={i}\n              conviction={conviction}\n              handleChange={handleChange}\n              handleDelete={handleDelete}\n            />)}\n        </Table.Body>\n      </Table>\n\n      <Grid padded stackable columns={1}>\n        <Grid.Row>\n          <Grid.Column width={4}>\n            <Input\n              fluid\n              min='1'\n              max='100'\n              type='number'\n              placeholder='Number of convictions'\n              value={convictionNum}\n              onChange={onConvictionNumChange}\n              label={<Button secondary onClick={handleAddConvictions}>Add More Convictions</Button>}\n              labelPosition='right' />\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default ConvictionForm;\n","import React from 'react';\nimport { Button, Grid, List, Table } from 'semantic-ui-react';\n\nconst Headers = [\n  {\n    text: 'Case No.',\n    width: '3'\n  },\n  {\n    text: 'Eligible Convictions',\n    width: '3'\n  },\n  {\n    text: 'Eligibility',\n    width: '3'\n  },\n  {\n    text: 'Reasons',\n    width: '7'\n  }\n];\n\nconst ConvictionResults = ({\n  calculatorInput,\n  calculatorOutput,\n  clientName,\n  clientDOB,\n  handleBack,\n  handleReset\n}) => {\n  const convictions = calculatorOutput.convictions.map(({ id, vacatable, reasons }, i) => {\n    const messages = vacatable ?\n      reasons.vacatableReasons :\n      vacatable === null ? reasons.errors : reasons.notVacatableReasons;\n    return (\n      {\n        id: id,\n        crime: calculatorInput.convictions[i].crime,\n        vacatable: vacatable,\n        reasons: messages\n      }\n    );\n  });\n\n  return (\n    <React.Fragment>\n      <h2>{`Report for ${clientName}`}</h2>\n      <Table striped stackable>\n        <Table.Header>\n          <Table.Row>\n            {Headers.map(headerMetaData =>\n              <Table.HeaderCell key={headerMetaData.text} width={headerMetaData.width}>\n                {headerMetaData.text}\n              </Table.HeaderCell>)}\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {convictions.map(({ id, crime, vacatable, reasons }) =>\n            <Table.Row key={id}>\n              <Table.Cell>\n                <b className='results-table-header'>{`${Headers[0].text}: `}</b>\n                {id}\n              </Table.Cell>\n              <Table.Cell>\n                <b className='results-table-header'>{`${Headers[1].text.slice(0, -1)}: `}</b>\n                {crime}\n              </Table.Cell>\n              <Table.Cell>\n                <b className='results-table-header'>{`${Headers[2].text}: `}</b>\n                <b style={{ color: vacatable ? 'green' : 'red' }}>\n                  {vacatable ? 'Yes' : 'No'}\n                </b>\n              </Table.Cell>\n              <Table.Cell>\n                <b className='results-table-header'>{`${Headers[3].text}: `}</b>\n                <List bulleted>\n                  {reasons.map(reason => <List.Item key={reason}>{reason}</List.Item>)}\n                </List>\n              </Table.Cell>\n            </Table.Row>)}\n        </Table.Body>\n      </Table>\n\n      <Grid padded stackable columns={2}>\n        <Grid.Row>\n          <Grid.Column width={2}>\n            <Button fluid secondary onClick={handleBack}>Back</Button>\n          </Grid.Column>\n          <Grid.Column width={2}>\n            <Button fluid primary onClick={handleReset}>Reset</Button>\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default ConvictionResults;\n","export class CalculatorOutput {\n  constructor(targetDate, convictions) {\n    this.targetDate = targetDate;\n    this.convictions = convictions;\n  }\n\n  getConviction(id) {\n    let matchingConviction = null;\n    this.convictions.forEach(conviction => {\n      if (conviction.id === id) {\n        matchingConviction = conviction;\n      }\n    })\n    return matchingConviction;\n  }\n}\n\nexport class ConvictionOutput {\n  constructor(id, vacatable, reasons) {\n    this.id = id;\n    this.vacatable = vacatable;\n    this.reasons = reasons;\n  }\n}\n\nexport class ConvictionVacatableReasons {\n  constructor(vacatableReasons, notVacatableReasons, errors) {\n    this.vacatableReasons = vacatableReasons;\n    this.notVacatableReasons = notVacatableReasons;\n    this.errors = errors;\n  }\n}","import moment from 'moment';\n\nimport CrimeClassification from \"./type/CrimesClassifications\";\nimport {\n    CalculatorOutput,\n    ConvictionOutput,\n    ConvictionVacatableReasons\n} from \"./type/CalculatorOutput\";\n\nexport default class EligibilityTimelineCalculator {\n    calculate(input) {\n\n        let output = this.createSkeletonCalculatorOutput(input);\n        let calculationDate = moment(input.calculationDate);\n        let clientDOB = moment(input.clientDOB);\n\n        // 1. Determine the most recent conviction date, then check whether date between NOW and the date\n        //    recent conviction will make any of the convictions ineligible for vacation\n        //      Misdemeanor & Gross Misdemeanor - no new conviction in the past 3 years\n        //      Class B Felony - no new conviction in the past 10 years\n        //      Class C Felony - no new conviction in the past 5 years\n        let lastConvictionDate = this.calculateLastConvictionDate(input);\n        let lastConvictionDateString = lastConvictionDate.format('YYYY-MM-DD');\n        let yearsSinceLastConvictionDate = calculationDate.diff(lastConvictionDate, 'years');\n\n        input.convictions.forEach((conviction) => {\n            let convictionOutput = output.getConviction(conviction.id);\n\n            switch (conviction.classification) {\n                case CrimeClassification.MISDEMEANOR:\n                case CrimeClassification.GROSS_MISDEMEANOR:\n                    if (yearsSinceLastConvictionDate >= 3) {\n                        convictionOutput.reasons.vacatableReasons.push(\"No new conviction within the last 3 years.\");\n                    } else {\n                        convictionOutput.reasons.notVacatableReasons.push(\n                            `The latest conviction date ${lastConvictionDateString} is within the last 3 years.`\n                        );\n                    }\n                    break;\n                // Marijuana misdemeanors are treated differently, they are vacatable regardless of time of offense\n                // as long as the client was at least 21 years old when charged. These convictions should also not\n                // affect eligibility of vacation of other convictions.\n                case CrimeClassification.MARIJUANA_MISDEMEANOR:\n                    let relevantDate = moment(conviction.relevantDate);\n                    let ageAtOffenseTime = relevantDate.diff(clientDOB, 'years')\n                    if (ageAtOffenseTime >= 21) {\n                        convictionOutput.reasons.vacatableReasons.push(\"Was at least 21 years old at time of offense.\");\n                    } else {\n                        convictionOutput.reasons.notVacatableReasons.push(\"Was less than 21 years old at time of offense.\");\n                    }\n                    break;\n                case CrimeClassification.FELONY_CLASS_B:\n                    if (yearsSinceLastConvictionDate >= 10) {\n                        convictionOutput.reasons.vacatableReasons.push(\"No new conviction within the last 10 years.\");\n                    } else {\n                        convictionOutput.reasons.notVacatableReasons.push(\n                            `The latest conviction date ${lastConvictionDateString} is within the last 10 years.`\n                        );\n                    }\n                    break;\n                case CrimeClassification.FELONY_CLASS_C:\n                    if (yearsSinceLastConvictionDate >= 5) {\n                        convictionOutput.reasons.vacatableReasons.push(\"No new conviction within the last 5 years.\");\n                    } else {\n                        convictionOutput.reasons.notVacatableReasons.push(\n                            `The latest conviction date ${lastConvictionDateString} is within the last 5 years.`\n                        );\n                    }\n                    break;\n                default:\n                    convictionOutput.reasons.errors.push(\"Crime Classification not specified.\");\n                    break;\n            }\n        });\n\n        // 2. (Misdemeanor & Gross Misdemeanor) For each conviction, determine if it is eligible\n        //    - 3 years has passed since the Relevant Date, unless:\n        //      - If the conviction involves \"Operating a Vehicle Under Influence\"\n        //        - 10 year has passed since the arrest date\n        //      - If the conviction involved \"Domestic Violence\"\n        //        - 5 years has passed since the sentence is completed\n\n        input.convictions.forEach((conviction) => {\n            let convictionOutput = output.getConviction(conviction.id);\n\n            let relevantDate = moment(conviction.relevantDate);\n            let relevantDateString = relevantDate.format('YYYY-MM-DD')\n            let yearsSinceRelevantDate = calculationDate.diff(relevantDate, 'years');\n\n            if (conviction.classification === CrimeClassification.MISDEMEANOR ||\n                conviction.classification === CrimeClassification.GROSS_MISDEMEANOR) {\n                if (conviction.isDuiRelated === true) {\n                    if (yearsSinceRelevantDate >= 10) {\n                        convictionOutput.reasons.vacatableReasons.push(\n                            \"Conviction involves DUI, 10 year has passed since the Relevant Date\"\n                        );\n                    } else {\n                        convictionOutput.reasons.notVacatableReasons.push(\n                            `Conviction involves DUI, 10 years has not passed since the Relevant Date ${relevantDateString}`\n                        );\n                    }\n                } else {\n                    if (conviction.isDomesticViolenceRelated === true) {\n                        if (yearsSinceRelevantDate >= 5) {\n                            convictionOutput.reasons.vacatableReasons.push(\"Conviction involves Domestic Violence, 5 year has passed since the Relevant Date (completion of sentence and any treatment ordered)\");\n                        } else {\n                            convictionOutput.reasons.notVacatableReasons.push(\n                                `Conviction involves Domestic Violence, 5 year has not passed since the Relevant Date  ${relevantDateString}`\n                            );\n                        }\n                    } else {\n                        if (yearsSinceRelevantDate >= 3) {\n                            convictionOutput.reasons.vacatableReasons.push(\"3 year has passed since the Relevant Date\");\n                        } else {\n                            convictionOutput.reasons.notVacatableReasons.push(\n                                `3 years has not passed since the Relevant Date ${relevantDateString}`\n                            );\n                        }\n                    }\n                }\n            }\n        });\n\n        // 3. (Felony) For each conviction, determine if it is eligible\n        //    - Offence is committed on or after July 1, 1984\n        //      - Class B Felony - 10 year has passed since latter of \"release\" and \"sentencing\" date\n        //      - Class C Felony - 5 years has passed since latter of \"release\" and \"sentencing\" date\n\n        input.convictions.forEach((conviction) => {\n            let convictionOutput = output.getConviction(conviction.id);\n\n            let relevantDate = moment(conviction.relevantDate);\n            let relevantDateString = relevantDate.format('YYYY-MM-DD')\n            let yearsSinceRelevantDate = calculationDate.diff(relevantDate, 'years');\n\n            // TODO: Verify if this is only applicable to Felonies\n            if (conviction.classification === CrimeClassification.FELONY_CLASS_C ||\n                conviction.classification === CrimeClassification.FELONY_CLASS_B) {\n                if (relevantDate >= moment('1984-07-01')) {\n                    convictionOutput.reasons.vacatableReasons.push(\n                        \"Offense's Relevant Date (committed) is after July 1st, 1984.\"\n                    );\n                } else {\n                    convictionOutput.reasons.notVacatableReasons.push(\n                        `Offense Relevant Date ${relevantDateString} is before July 1st, 1984.`\n                    );\n                }\n            }\n            if (conviction.classification === CrimeClassification.FELONY_CLASS_B) {\n                if (yearsSinceRelevantDate >= 10) {\n                    convictionOutput.reasons.vacatableReasons.push(\n                        \"10 years has passed since the Relevant Date (latter of release or sentencing date)\"\n                    );\n                } else {\n                    convictionOutput.reasons.notVacatableReasons.push(\n                        `10 years has not passed since the Relevant Date ${relevantDateString}`\n                    );\n                }\n            }\n\n            if (conviction.classification === CrimeClassification.FELONY_CLASS_C) {\n                if (yearsSinceRelevantDate >= 5) {\n                    convictionOutput.reasons.vacatableReasons.push(\n                        \"5 years has passed since the Relevant Date (latter of release or sentencing date\"\n                    );\n                } else {\n                    convictionOutput.reasons.notVacatableReasons.push(\n                        `5 years has not passed since the Relevant Date ${relevantDateString}`\n                    );\n                }\n            }\n\n        });\n\n        this.setEligibilityProperty(output);\n\n        return output;\n    }\n\n    createSkeletonCalculatorOutput(input) {\n        let outputConvictionSkeletons = input.convictions.map(inputConviction => {\n            return new ConvictionOutput(inputConviction.id, null, new ConvictionVacatableReasons([], [], []));\n        });\n        return new CalculatorOutput(input.calculationDate, outputConvictionSkeletons);\n    }\n\n    calculateLastConvictionDate(input) {\n        let sortedConvictionDateStrings = input.convictions\n            .filter(conviction => conviction.classification !== CrimeClassification.MARIJUANA_MISDEMEANOR)\n            .map(conviction => conviction.relevantDate)\n            .filter(conviction => conviction !== undefined)\n            .sort();\n\n        let lastConvictionDateString = sortedConvictionDateStrings.pop();\n        return moment(lastConvictionDateString);\n    }\n\n    setEligibilityProperty(output) {\n        output.convictions.forEach((conviction) => {\n            if (conviction.reasons.errors.length > 0) {\n                conviction.vacatable = null;\n            } else if (conviction.reasons.notVacatableReasons.length > 0) {\n                conviction.vacatable = false;\n            } else if (conviction.reasons.vacatableReasons.length > 0) {\n                conviction.vacatable = true;\n            } else {\n                console.error(\"Conviction output does not have any errors, vacatable reasons and not vacatable reasons.\")\n            }\n        });\n    }\n}\n","export class CalculatorInput {\n  constructor(calculationDate, clientDOB, convictions) {\n    this.calculationDate = calculationDate;\n    this.clientDOB = clientDOB;\n    this.convictions = convictions; // List of Conviction Input\n  }\n}\n\nexport class ConvictionInput {\n  constructor(id, crime, classification, isDomesticViolenceRelated, isDuiRelated, relevantDate) {\n    this.id = id;\n    this.crime = crime;\n    this.classification = classification;\n    this.isDomesticViolenceRelated = isDomesticViolenceRelated;\n    this.isDuiRelated = isDuiRelated;\n    this.relevantDate = relevantDate;\n  }\n}\n","import React from 'react';\nimport moment from 'moment';\nimport { Button, Form, Grid, TextArea } from 'semantic-ui-react';\n\nimport ConvictionForm from './ConvictionForm';\nimport ConvictionResults from './ConvictionResults';\n\nimport EligibilityTimelineCalculator from '../logic/EligibilityTimelineCalculator';\nimport { CalculatorInput, ConvictionInput } from '../logic/type/CalculatorInput';\n\nconst ConvictionCalculator = () => {\n  const calculator = new EligibilityTimelineCalculator();\n  const [hasResults, setHasResults] = React.useState(false);\n  const calculatorInputRef = React.useRef();\n  const calculatorOutputRef = React.useRef();\n  const [convictions, setConvictions] = React.useState([]);\n  const [clientName, setClientName] = React.useState('');\n  const [clientDOB, setClientDOB] = React.useState('');\n  const [notes, setNotes] = React.useState('');\n\n  const addConvictions = (num) => {\n    const newConvictions = Array.apply(null, Array(num)).map(() => (\n      { id: '', name: '', classification: '', isDomesticViolence: false, date: '' }));\n    setConvictions(convictions => convictions.concat(newConvictions));\n  };\n\n  React.useEffect(() => {\n    addConvictions(5);\n  }, []);\n\n  const handleSubmit = () => {\n    const filledInConvictions = convictions.filter(conviction => {\n      return (\n        conviction.id && conviction.name && conviction.classification && conviction.date\n      );\n    });\n    const convictionInputs = filledInConvictions.map(conviction => new ConvictionInput(conviction.id,\n      conviction.name,\n      conviction.classification === 'unclear' ? null : conviction.classification,\n      conviction.isDomesticViolence,\n      conviction.isDuiRelated,\n      moment(conviction.date, 'YYYY-MM-DD').toISOString()));\n    const calculationDate = moment().toISOString();\n    const clientDOBString = moment(clientDOB, 'YYYY-MM-DD').toISOString();\n    const calculatorInput = new CalculatorInput(calculationDate, clientDOBString, convictionInputs);\n    calculatorInputRef.current = calculatorInput;\n    const calculatorOutput = calculator.calculate(calculatorInput);\n    calculatorOutputRef.current = calculatorOutput;\n    setHasResults(true);\n  };\n\n  const handleChange = (index, key, value) => {\n    setConvictions(convictions => {\n      const newConvs = [...convictions];\n      newConvs[index][key] = value;\n      return newConvs;\n    });\n  };\n\n  const handleDelete = (index) => {\n    setConvictions(convictions => {\n      const newConvs = [...convictions];\n      newConvs.splice(index, 1);\n      return newConvs;\n    });\n  };\n\n  const handleBack = () => {\n    calculatorOutputRef.current = null;\n    setHasResults(false);\n  };\n\n  const handleReset = () => {\n    calculatorInputRef.current = null;\n    calculatorOutputRef.current = null;\n    setConvictions([]);\n    addConvictions(5);\n    setClientName('');\n    setNotes('');\n    setHasResults(false);\n  };\n\n  const handlePrint = () => {\n    window.print();\n  };\n\n  const onTextAreaChange = (e, { value }) => {\n    setNotes(value);\n  };\n\n  return (\n    <React.Fragment>\n      {hasResults ?\n        <ConvictionResults\n          calculatorInput={calculatorInputRef.current}\n          calculatorOutput={calculatorOutputRef.current}\n          clientName={clientName}\n          clientDOB={clientDOB}\n          handleBack={handleBack}\n          handleReset={handleReset}\n        /> :\n        <ConvictionForm\n          addConvictions={addConvictions}\n          convictions={convictions}\n          handleChange={handleChange}\n          handleDelete={handleDelete}\n          clientName={clientName}\n          setClientName={setClientName}\n          clientDOB={clientDOB}\n          setClientDOB={setClientDOB}\n        />}\n\n      <Grid padded stackable columns={2}>\n        <Grid.Row>\n          <Grid.Column width={13}>\n            <Form>\n              <Form.Field><b>Notes:</b></Form.Field>\n              <TextArea\n                onChange={onTextAreaChange}\n                placeholder='Notes and comments...'\n                rows={10}\n                value={notes} />\n            </Form>\n          </Grid.Column>\n          <Grid.Column verticalAlign='middle' width={2}>\n            {hasResults && <Button fluid primary onClick={handlePrint}>Print</Button>}\n            {!hasResults && <Button fluid primary onClick={handleSubmit}>Submit</Button>}\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n      <div id='notes-print-area'>\n        <h5>Notes:</h5>\n        {notes}\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default ConvictionCalculator;\n","import React from 'react';\n\nimport ConvictionCalculator from './components/ConvictionCalculator';\n\nimport './App.css';\n\n\n\nimport ReactGA from 'react-ga';\nconst trackingId = \"UA-156075348-1\";\n\nfunction App() {\n  React.useEffect(() => {\n    if(process.env.NODE_ENV === 'production'){\n      ReactGA.initialize(trackingId);\n      ReactGA.pageview(window.location.pathname + window.location.search);\n    }\n  })\n  return (\n    <div>\n      <header className=\"App-header\">\n        <p>\n          King County Conviction Vacation\n        </p>\n      </header>\n      <ConvictionCalculator />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}